<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Sum of squared error · LoopVectorization.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link href="../../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>LoopVectorization.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../../">Home</a></li><li><a class="toctext" href="../../getting_started/">Getting Started</a></li><li><span class="toctext">Examples</span><ul><li><a class="toctext" href="../matrix_multiplication/">Matrix Multiplication</a></li><li><a class="toctext" href="../matrix_vector_ops/">Matrix-Vector Operations</a></li><li><a class="toctext" href="../dot_product/">Dot Products</a></li><li class="current"><a class="toctext" href>Sum of squared error</a><ul class="internal"></ul></li></ul></li><li><a class="toctext" href="../../vectorized_convenience_functions/">Vectorized Convenience Functions</a></li><li><a class="toctext" href="../../future_work/">Future Work</a></li><li><a class="toctext" href="../../api/">API reference</a></li><li><span class="toctext">Developer Documentation</span><ul><li><a class="toctext" href="../../devdocs/overview/">Developer Overview</a></li><li><a class="toctext" href="../../devdocs/loopset_structure/">LoopSet Structure</a></li><li><a class="toctext" href="../../devdocs/constructing_loopsets/">Constructing LoopSets</a></li><li><a class="toctext" href="../../devdocs/evaluating_loops/">Determining the strategy for evaluating loops</a></li><li><a class="toctext" href="../../devdocs/lowering/">Lowering</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Examples</li><li><a href>Sum of squared error</a></li></ul><a class="edit-page" href="https://github.com/chriselrod/LoopVectorization.jl/blob/master/docs/src/examples/sum_of_squared_error.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Sum of squared error</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Sum-of-squared-error-1" href="#Sum-of-squared-error-1">Sum of squared error</a></h1><p>To calculate <code>(y - X * β)&#39;(y - X * β)</code>, we can use the following loop.</p><pre><code class="language-julia">function sse_avx(y, X, β)
    lp = zero(eltype(y))
    @avx for i ∈ eachindex(y)
        δ = y[i]
        for j ∈ eachindex(β)
            δ -= X[i,j] * β[j]
        end
        lp += δ * δ
    end
    lp
end</code></pre><p>This example demonstrates the importance of (not) modeling memory bandwidth and cache, as the performance quickly drops dramatically. However, it still does much better than all the compiled loops, with only the BLAS <code>gemv</code>-based approach matching (and ultimately beating) it in performance, while the other compilers lagged well behind.</p><p>Performance starts to degrade for sizes larger than 60. Letting <code>N</code> be the size, <code>X</code> was a <code>3N/2</code>x <code>N/2</code> matrix. Therefore, performance started to suffer when <code>X</code> had more than about 30 columns (performance is much less sensitive to the number of rows).</p><p><img src="../../assets/bench_sse_v1.svg" alt="sse"/></p><footer><hr/><a class="previous" href="../dot_product/"><span class="direction">Previous</span><span class="title">Dot Products</span></a><a class="next" href="../../vectorized_convenience_functions/"><span class="direction">Next</span><span class="title">Vectorized Convenience Functions</span></a></footer></article></body></html>
